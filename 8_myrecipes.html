<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ebs</title>
    <link rel="stylesheet" href="8_myrecipes.css">
    <script src="8_myrecipes.js" defer></script>
    <script>
        window.onload = function() {
            var storedRecipes = localStorage.getItem('recipes');
            if (storedRecipes) {
                var recipes = JSON.parse(storedRecipes);
                displayPosts(recipes);
            }
        };

        function displayPosts(posts) {
            var tableBody = document.getElementById('recipe-list'); // 테이블 바디 참조
            tableBody.innerHTML = ''; // 이전 내용을 지움

            posts.forEach((post, index) => {
                var row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${post.name}</td>
                    <td>${post.summary}</td>
                    <td><button class='delete-button' data-id='${index}'>&#10006;</button></td>
                `;
                tableBody.appendChild(row);
            });

            // 삭제 버튼에 클릭 이벤트 추가
            var deleteButtons = tableBody.querySelectorAll('.delete-button');
            deleteButtons.forEach(button => {
                button.addEventListener('click', function(event) {
                    var id = this.getAttribute('data-id');
                    deletePost(id);
                });
            });
        }

        function deletePost(id) {
            var storedPosts = localStorage.getItem('recipes');
            if (storedPosts) {
                var posts = JSON.parse(storedPosts);
                posts.splice(id, 1); // 해당 게시물을 배열에서 삭제
                localStorage.setItem('recipes', JSON.stringify(posts)); // 변경된 게시물 목록을 저장
                displayPosts(posts); // 게시물 목록 갱신
            }
        }
    </script>
</head>
<body>
<header>
    <a href="4_main.html">
        <img id="logo" src="logo.png" alt="Logo">
    </a>
    <input id="search-bar" type="text" placeholder="레시피 검색...">
    <div id="user-name">사용자 이름
        <div class="dropdown-icon">&#9660;</div>
    </div>
</header>
<nav>
    <a href="5_listADD.html">냉장고</a>
    <a href="8_myrecipes.html">내 레시피</a>
    <a href="7_newrecipe.html">레시피 만들기</a>
    <a href="9_commincation.html">소통</a>
    <a href="10_qna.html">문의 사항</a>
</nav>
<div class="content">
    <table>
        <thead>
            <tr>
                <th>순번</th>
                <th>레시피 이름</th>
                <th>레시피 요약</th>
                <th></th> <!-- 추가된 열 -->
            </tr>
        </thead>
        <tbody id="recipe-list">
            <!-- 테이블 데이터 행은 이곳에 추가됩니다 -->
        </tbody>
    </table>
    <div class="button-container">
        <a href="7_newrecipe.html">
            <button type="button">레시피 작성</button>
        </a>
    </div>
</div>
</body>
</html>
